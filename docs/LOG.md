# 일자별 기록


## 2022-04-12 tue
- 회사에서 잠깐 미션을 살펴보았다. 이클립스에 각종 보안 프로그램 때문이지 제대로 동작하지를 않았다.
- 그래서 처음에는 미션이 `NsTest`, `Console`, `Random`등을 직접 구현하는 것인 줄 알았다. 집에 와서 인텔리제이에 넣자마자 너무나 잘 동작했다..; 역시 그 정도로 어려운 미션일리는 없었다.

### 프로젝트 파악하기

- 테스트코드
    - 일단 테스트 코드의 동작 자체가 일단 이해가 안된다.
        - Gradle에 커스텀 라이브러리가 추가 되어 있었다.
            - <https://jitpack.io/>이라는 서비스를 통해 git repo를 gradle 의존성으로 추가할 수 있는 듯 하다.
- Console
    - 접근제한을 크게 신경쓰면서 개발해본 적이 없어 클래스 내부 메소드를 호출하는 것도 한참 걸렸다. 해당 메소드가 `private`인걸 한참 뒤에 알았다..

### 커밋하기
- 커밋을 컨벤션대로 한번에 하고 싶었지만, 내용이 좀 빠진게 있어서 local에 커밋된 2개 버전의 커밋을 합치고, 커밋 메세지를 수정해야 할 일이 생겼다.
  - rebase로 squash 하는 작업은 처음 해보았다. HEAD에서 몇번째 커밋까지를 합칠 것인지 결정하는 식으로 되어 있다.
  - 커밋 메세지를 수정하는 것 또한 간단했다. commit 명령어의 --amend 옵션을 사용하면 된다.
  - 이 모든 것이 origin으로 push를 하기 전이라서 작업이 간단했다. 


## 2022-04-13 wed
- 일자별 기록을 따로 분리 했는데, 이 미션 혹은 차후 미션을 하더라도 기록을 이어나가면서, 추후에 얼마나 발전했는지를 파악해보고 싶다.

### 일단 테스트를 통과하기
- 아침과 점심에 짬을 내어 테스트가 일단 통과하게 만드는 것을 시도해보고 있다.
  - 첫번째는 단순히 출력을 모두 포함하면 되는데, 두번째 exception을 통과 시키면서 첫번째 테스트를 통과하게 만드는 것이 현재  난관이다. 
    - 초기에 입력값의 길이가 3이 넘으면 exception을 던지고, 그렇지 않으면 contain해야할 값을 모두 print하는 방식을 생각했었다. 이게 테스트 통과가 안된 이유는 main 메소드가 끝나지 않으면 테스트 간 input이 죽 이어지는 구조이기 때문에, 입력값을 버퍼가 빌 때까지 꺼내지 않으면 예외가 발생하지 않는다.
    
#### `NsTest`
- NsTest클래스는 시스템 I/O에 따른 테스트하기 위해 만들어진 클래스로 판단된다.

### MVC 구조를 고민 중
- 힌트에서 MVC 패턴을 사용하라고 적혀 있었다. 이 프로젝트를 MVC에 대입하면 어떻게 구성이 될까?
  - 먼저 Gamw 클래스는 view에 가까워 보인다. 명령을 전달 받고, 다시 콘솔에 메세지를 출력하고 있다. 무엇보다 개괄적인 실행흐름이 Game 클래스 안에서 이루어진다.
  - 그렇다면 명령어에 대한 해석은 Game 클래스가 아닌 별도 Controller 역할의 클래스가 필요할 것 같다. 이를 처음에는 SignInterpreter로 명명했다.
    - 그런데 여기서 sign(= input의 개념)에 대한 validation은 domain 클래스가 해야할 일이 아닐까 하는 생각이 든다. 해서 String으로 생성되는 Ball 클래스에서 애초에 생성이 되는 시점에 유효값 체크를 하면 더 자연스러울 것 같다.
- 여기까지 고민한 걸로 Application -> Game -> SignInterpreter -> Ball 까지 가는 구조는 만들어 냈다.
  - 테스트가 깨지지 않으면서 규약 안에서 개발을 하려고 하니, 변수의 명이나 클래스 간의 관계, 접근제어자, static 여부 등등 훨씬 많은 것들을 생각하게 된다. 그만큼 머리도 아프지만 새로운 자극이라 지금까진 즐거운 것 같다.


## 2022-04-14 thu
### 클래스 명 변경
- 클래스 명칭이 내 머리 속의 개념과 일치하지 않으니까 어떤 클래스가 무슨 역할을 해야하는지 얼른 판단이 서질 않는 것 같다.
  - 좀 더 내가 보기에 직관적으로 바꾸어보았다. 게임 자체는 우리가 보통 콘솔에서 실행한다. 그리고 콘솔 안에서 실행되는 것이 게임이고, 게임 안에서 공이 던져?지고 판별된다.
  - 이 플로우면 조금 더 이해하기 편한 것 같다.
- 이렇게 바꾸고 나니까 예제 그대로 실행하기 위한 지시어(~~입력해 주세요 등)를 두는 위치가 고민이 많이 된다. 모양이 예쁘게 나오지가 않는다. 
  - 일단 콘솔 안에서 시작 부분과 게임을 들어가는 부분을 나누었다.


## 2022-04-15 fri
- 마침 고향을 가야해서 가는 기차 안에서 작업을 했다. 덕분에 구조를 더 말끔히 하려다가 테스트가 깨져버렸다. 어디까지 수정해야 깨지고, 어디까지 원복을 해야하는지를 찾기는 것이 점점 막막해졌다.
  - 어차피 엄청 중대한 변경은 아니기 때문에 stash로 저장을 하고 다시 처음부터 해보았다. 문제 자체는 if 조건을 잘못 적었기 때문에(입력값의 유효성 부분) 발생했었다.
  - 자꾸 기능을 추가해 나가면서 단계별로 테스트가 작성되지 않으니, 작업이 끊임이 없게 느껴진다. 기능 설계한 방식과 개발을 실제 하고 있는 것이 얼마나 일치하고 있는지도 의문이다.
  - 마음은 급하지만 천천히 내 설계에 대해 다시 읽어 내려가야 하는 시점인 것 같다.


## 2022-04-16 sat

### random
- 기존에 주어진 첫번째 테스트가 랜덤에 대한 mocking을 하는 로직이 포함된 랜덤 테스트 였다. 어떤 숫자가 들어와도 뒤에 6개 숫자로 랜덤이 생성되도록 하는 것 같다.
- 그럼 해당 랜덤 넘버를 생성하는 로직을 그대로 가져다 쓰면 될 듯 하다.

### 일단 완성
- 계속해서 GameConsole -> Game -> Ball 로 가는 흐름에 어울리는 구조인지를 생각하고 수정했다. 원래는 한 단계씩 계속 끊어서 가고 싶었는데, 테스트 분리가 생각보다 쉽지가 않아서 결국 최소 기능까지는 다 구현이 완료 되었다.


## 2022-04-17 sun

- 완성 이후로는 계속 정리할 코드를 살펴보고 수정하는 작업만 계속 했다. 확실히 테스트 코드가 존재하니, 내가 변경한 로직이 문제가 없는지 크게 걱정할 필요가 없었다. 그냥 테스트를 다시 돌려보면 되는 거니까.
- 마무리 한 듯 싶어 마지막으로 프리코스 과제를 죽 둘러보니, 함수 10라인 이내가 아닌 곳이 몇군데 있었다. 바로 변경이 된 부분도 있고 억지스럽게 바꾼 부분도 있다.. 하여튼 10라인도 다시 맞추었다.

- 1주차에 내가 할 수 있는 어느 정도는 마무리 한 것 같다.
  - 테스트를 작성하는 것은 테스트 할 수 있는 로직을 작성해야 한다는 것이 포함된 의미였다. 여기저기 걸쳐져 있는 로직 들은 테스트를 추가하는 것 자체가 어려웠다.  